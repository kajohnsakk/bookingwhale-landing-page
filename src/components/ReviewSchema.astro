---
// Review Schema component for customer testimonials
const reviews = [
  {
    author: "สมชาย ใจดี",
    authorLocation: "เจ้าของร้านเสริมสวย กรุงเทพ",
    rating: 5,
    reviewBody: "ใช้ BookingWhale มา 6 เดือนแล้ว ลูกค้าไม่มาตามนัดลดลง 80% จริงๆ ระบบจองผ่าน LINE OA ใช้ง่ายมาก ลูกค้าก็ชอบ",
    datePublished: "2024-12-15"
  },
  {
    author: "ดร.วิชัย สุขใส",
    authorLocation: "คลินิกทันตกรรม เชียงใหม่",
    rating: 5,
    reviewBody: "ระบบจัดการคิวอัตโนมัติทำให้คลินิกเราไม่มีปัญหาคิวซ้อน แจ้งเตือนผ่าน LINE ทำให้ลูกค้ามาตรงเวลา เพิ่มรายได้ได้เยอะ",
    datePublished: "2024-12-10"
  },
  {
    author: "นางสาวปิยะ สวยงาม",
    authorLocation: "สปาและนวดแผนไทย ภูเก็ต",
    rating: 5,
    reviewBody: "ตอนแรกกังวลเรื่องการใช้งาน แต่ทีม BookingWhale ช่วยเหลือดีมาก ตั้งค่าให้ครบ ตอนนี้ลูกค้าจองผ่าน LINE ได้สะดวก",
    datePublished: "2024-12-05"
  },
  {
    author: "คุณสุรชัย ประสบโชค",
    authorLocation: "ร้านอาหาร พัทยา",
    rating: 4,
    reviewBody: "ระบบจองโต๊ะผ่าน LINE OA ช่วยลดการสับสนเวลารับจองมาก ลูกค้าพอใจกับความสะดวก รายได้เพิ่มขึ้น 30%",
    datePublished: "2024-11-28"
  },
  {
    author: "Sarah Johnson",
    authorLocation: "Fitness Center Bangkok",
    rating: 5,
    reviewBody: "BookingWhale has transformed our class booking system. International clients love the English interface while Thai customers prefer the LINE integration. Perfect solution!",
    datePublished: "2024-11-20"
  }
];

// Calculate aggregate rating
const totalRating = reviews.reduce((sum, review) => sum + review.rating, 0);
const averageRating = (totalRating / reviews.length).toFixed(1);

const aggregateRating = {
  "@context": "https://schema.org",
  "@type": "AggregateRating",
  "ratingValue": averageRating,
  "ratingCount": reviews.length,
  "bestRating": 5,
  "worstRating": 1
};

const reviewsSchema = {
  "@context": "https://schema.org",
  "@type": "Product",
  "name": "BookingWhale - ระบบจองออนไลน์ผ่าน LINE OA",
  "description": "ระบบจองนัดหมายอัตโนมัติสำหรับธุรกิจไทย เชื่อมต่อ LINE Official Account",
  "brand": {
    "@type": "Brand",
    "name": "BookingWhale"
  },
  "aggregateRating": aggregateRating,
  "review": reviews.map(review => ({
    "@type": "Review",
    "author": {
      "@type": "Person",
      "name": review.author
    },
    "reviewRating": {
      "@type": "Rating",
      "ratingValue": review.rating,
      "bestRating": 5,
      "worstRating": 1
    },
    "reviewBody": review.reviewBody,
    "datePublished": review.datePublished,
    "publisher": {
      "@type": "Organization",
      "name": "BookingWhale"
    }
  }))
};
---

<!-- Review Schema for SEO -->
<script type="application/ld+json" set:html={JSON.stringify(reviewsSchema)}></script>

<!-- Display testimonials for users -->
<section class="testimonials-section py-16 bg-gray-50">
  <div class="container-tight">
    <div class="text-center mb-12">
      <h2 class="text-3xl font-bold text-gray-900 mb-4">
        ลูกค้าพูดถึงเรา
      </h2>
      <p class="text-lg text-gray-600">
        ดูความคิดเห็นจากเจ้าของธุรกิจที่ใช้ BookingWhale
      </p>
      <div class="flex items-center justify-center mt-4">
        <div class="flex text-yellow-400">
          {Array.from({length: 5}).map((_, i) => (
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
            </svg>
          ))}
        </div>
        <span class="ml-2 text-sm text-gray-600">
          {averageRating}/5.0 จาก {reviews.length} รีวิว
        </span>
      </div>
    </div>

    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
      {reviews.slice(0, 3).map((review) => (
        <div class="bg-white rounded-xl p-6 shadow-lg">
          <div class="flex items-center mb-4">
            <div class="flex text-yellow-400">
              {Array.from({length: review.rating}).map((_, i) => (
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                </svg>
              ))}
            </div>
            <span class="ml-2 text-sm text-gray-500">{review.datePublished}</span>
          </div>
          <p class="text-gray-700 mb-4 leading-relaxed">
            "{review.reviewBody}"
          </p>
          <div class="border-t pt-4">
            <p class="font-semibold text-gray-900">{review.author}</p>
            <p class="text-sm text-gray-500">{review.authorLocation}</p>
          </div>
        </div>
      ))}
    </div>

    <div class="text-center mt-8">
      <button class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors">
        ดูรีวิวทั้งหมด
      </button>
    </div>
  </div>
</section>

<style>
  .testimonials-section {
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
  }
</style>